<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>funnyFunction Document</title>
    <link rel="stylesheet" type="text/css" href="vendor/pure-min.css">
    <link rel="stylesheet" type="text/css" href="funnyFunction.css">
    <link rel="stylesheet" type="text/css" href="vendor/highlight/monokai_sublime.css">
    <script src='vendor/jquery-1.11.2.min.js'></script>
    <script src='funnyFunction.js'></script>
    <script src='funnyFunction-tmpl.js'></script>
    
    <script type="text/javascript" src="vendor/doT.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('.pure-menu-list').delegate('li', 'click', function(event) {
                $('.pure-menu-selected').removeClass('pure-menu-selected');
                $(this).addClass('pure-menu-selected');
            });

            $('.fnExample').delegate('button', 'click', function(event) {
               var $this= $(this);
               var run= $this.data('run');
               var runIndex =$this.data('runindex');
               var showType =$("."+run+'showType').eq(runIndex).val();
               var html='';
               if(showType===undefined)
               {
                  alert(eval($("."+run+'Run').eq(runIndex).val()));
               }
               else{
                  $this.parent().find('.showType').remove();
                  var runResult =eval($("."+run+'Run').eq(runIndex).val());
                  if(funnyFunction.isObjectType("Object"),runResult)
                  {
                     var obj = funnyFunction.convertObjectToString(runResult);
                     obj = obj.replace(/\,/ig,',\r\n').replace(/\{/ig,'\{\r\n').replace(/\}\w?/ig,'\r\n\}');
                     $this.before('<div class="showType"><pre><code class="html hljs">'+obj+'</code></pre></div>');
                  }
               }
            });
           });

    </script>
</head>

<body>
    <div id="layout">
        <div id="menu">
            <div class="pure-menu">
                <a class="pure-menu-heading" href="#ff" style="text-transform:none">funnyFunction</a>
                <ul class="pure-menu-list" id="menuList">
                </ul>
            </div>
        </div>
        <div id="main">
            <div class="content" id="content">
            </div>
            <script id="funnyMenuTmpl" type="text/x-dot-template">
                {{ for(var objs in it) { }}
                <li class="pure-menu-item">
                    <a href="#{{=objs}}" title="{{=it[objs].dest}}" class="pure-menu-link">{{=objs}}</a>
                </li> 
                {{ } }}
            </script>
            <script id="funnyContentTmpl" type="text/x-dot-template">
                  <h1 id="ff">funnyFunction</h1>
                  {{ for(var objs in it) { }}
                    <div class="fnwrap" id={{=objs}}>
                        <div class="btnwrap">
                            <h2 class="name">{{=objs}}</h2>
                        </div>
                        {{ for(var obj in it[objs]) { }} 
                           {{if(obj === "name"){ }}
                                <h2 class="name">{{=it[objs][obj]}}</h2>
                           {{ } }}

                           {{if(obj === "fullname"){ }}
                                <p class="fullname">{{=it[objs][obj]}}</p>
                           {{ } }}

                           {{if(obj === "dest"){ }}
                                <p class="dest">{{=it[objs][obj]}}</p>
                           {{ } }}  

                           {{if(obj === "paramdest"){ }}
                                <h3 class="title1">参数</h3>
                                {{ for(var param in it[objs][obj]) { }}
                                <p>{{=it[objs][obj][param]}}</p>
                                {{ } }} 
                           {{ } }} 

                           {{if(obj === "treturn"){ }}
                                <h3 class="title2">返回</h3>
                                <p class="return">{{=it[objs][obj]}}</p>
                           {{ } }} 

                           {{if(obj === "viewCode"){ }}
                                {{ for(var videCode in it[objs][obj]) { }}
                                    <div class="fnExample">
                                        <h3 class="title3">示例</h3>
                                        <pre>
                                            <code class="javascript hljs">
                                                {{=it[objs][obj][videCode]}}
                                            </code>
                                        </pre>
                                        <button data-run="{{=objs}}" data-runIndex="{{=videCode}}" class="button-secondary pure-button">运行</button>
                                    </div>
                                {{ } }} 
                           {{ } }} 


                           {{if(obj === "showType"){ }}
                                {{ for(var showtype in it[objs][obj]) { }}
                                     <input type="hidden" class="{{=objs}}showType" value="{{=it[objs][obj][showtype]}}"></input>
                                {{ } }} 
                           {{ } }}


                           {{if(obj === "run"){ }}
                                {{ for(var run in it[objs][obj]) { }}
                                     <input type="hidden" class="{{=objs}}Run" value="{{=it[objs][obj][run]}}"></input>
                                {{ } }} 
                           {{ } }} 

                        {{ } }}
                    </div>
                  {{ } }}
            </script>
            <script type="text/javascript">
                var menuTmpl = doT.template(document.getElementById('funnyMenuTmpl').text);
                $("#menuList").html(menuTmpl(funnyContentTmpl));

                var contentTmpl = doT.template(document.getElementById('funnyContentTmpl').text);
                $("#content").html(contentTmpl(funnyContentTmpl));
            </script>
        </div>
    </div>
</body>

</html>
